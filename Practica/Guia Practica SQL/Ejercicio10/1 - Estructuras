CREATE DATABASE Ejercicio_10
GO
USE Ejercicio_10;

CREATE TABLE Ambiente
(
	Id INT IDENTITY(1,1) PRIMARY KEY,
	Descripcion VARCHAR(100) NOT NULL
);

CREATE TABLE Metodo 
(
	Id INT IDENTITY(1,1) PRIMARY KEY,
	Clase VARCHAR(45) NOT NULL,
	Metodo VARCHAR(45) NOT NULL
);

CREATE TABLE Page 
(
	Ip VARCHAR(45) PRIMARY KEY,
	WebPage VARCHAR(45) NOT NULL,
	IdAmbiente INT, 
	FOREIGN KEY (IdAmbiente) REFERENCES Ambiente(Id) ON DELETE CASCADE ON UPDATE CASCADE
); 

CREATE TABLE Request 
(
	NroRequest INT IDENTITY(1,1) PRIMARY KEY,
	Ip VARCHAR(45) NOT NULL,
	Fecha DATE NOT NULL,
	Hora TIME NOT NULL,
	IdMetodo INT,
	FOREIGN KEY(Ip) REFERENCES Page(Ip) ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY(IdMetodo) REFERENCES Metodo(Id) ON DELETE CASCADE ON UPDATE CASCADE
); 